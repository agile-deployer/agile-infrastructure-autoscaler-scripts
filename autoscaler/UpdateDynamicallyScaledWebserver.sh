    #!/bin/sh
    
    
    
    #Configuration values
    /usr/bin/ssh -i ${HOME}/.ssh/id_${ALGORITHM}_AGILE_DEPLOYMENT_BUILD_KEY_${BUILD_IDENTIFIER} ${OPTIONS} ${SERVER_USER}@${ip} "/bin/touch ${HOME}/.ssh/MYPUBLICIP:${ip}"
    /usr/bin/ssh -i ${HOME}/.ssh/id_${ALGORITHM}_AGILE_DEPLOYMENT_BUILD_KEY_${BUILD_IDENTIFIER} ${OPTIONS} ${SERVER_USER}@${ip} "/bin/touch ${HOME}/.ssh/MYIP:${private_ip}"

    #Copy across all our configuration values
    /usr/bin/scp -i ${HOME}/.ssh/id_${ALGORITHM}_AGILE_DEPLOYMENT_BUILD_KEY_${BUILD_IDENTIFIER} ${OPTIONS} ${HOME}/.ssh/PRODUCTION:* ${HOME}/.ssh/ENABLEEFS:* ${HOME}/.ssh/BUILDOS:* ${HOME}/.ssh/BUILDOSVERSION:* ${HOME}/.ssh/BUILDCLIENTIP:* ${HOME}/.ssh/ALGORITHM:* ${HOME}/.ssh/BUILDARCHIVE:* ${HOME}/.ssh/BUILDCHOICE:* ${HOME}/.ssh/CLOUDHOST:* ${HOME}/.ssh/CLOUDHOSTPASSWORD:* ${HOME}/.ssh/DATASTORECHOICE:* ${HOME}/.ssh/INMEMORYCACHE:* ${HOME}/.ssh/KEYID:* ${HOME}/.ssh/REGION:* ${HOME}/.ssh/APPLICATIONREPOSITORYPASSWORD:* ${HOME}/.ssh/SIZE:* ${HOME}/.ssh/SNAPAUTOSCALE:* ${HOME}/.ssh/SOURCECODEREPOSITORY:* ${HOME}/.ssh/WEBSERVERCHOICE:* ${HOME}/.ssh/WEBSITEDISPLAYNAME:* ${HOME}/.ssh/APPLICATIONIDENTIFIER:* ${HOME}/.ssh/APPLICATIONLANGUAGE:* ${HOME}/.ssh/APPLICATIONBASELINESOURCECODEREPOSITORY:* ${HOME}/.ssh/GITUSER:* ${HOME}/.ssh/GITEMAILADDRESS:* ${HOME}/.ssh/BUILDIDENTIFIER:* ${HOME}/.ssh/SUPERSAFEWEBROOT:* ${HOME}/.ssh/DIRECTORIESTOMOUNT:* ${HOME}/.ssh/DB_PORT:* ${HOME}/.ssh/SSH_PORT:* ${HOME}/.ssh/SSLGENERATIONMETHOD:* ${HOME}/.ssh/SSLGENERATIONSERVICE:* ${HOME}/.ssh/DBaaSHOSTNAME:* ${HOME}/.ssh/DBaaSUSERNAME:* ${HOME}/.ssh/DBaaSPASSWORD:* ${HOME}/.ssh/DBaaSDBNAME:* ${HOME}/.ssh/DBaaSREMOTESSHPROXYIP:* ${HOME}/.ssh/DBaaSREMOTESSHPROXYIPINDEX:* ${HOME}/.ssh/DEFAULTDBaaSOSUSER:* ${HOME}/.ssh/DATABASEDBaaSINSTALLATIONTYPE:* ${HOME}/.ssh/SERVERTIMEZONECITY:* ${HOME}/.ssh/SERVERTIMEZONECONTINENT:* ${HOME}/.ssh/PHP_VERSION:* ${HOME}/.ssh/PERSISTASSETSTOCLOUD:* ${SERVER_USER}@${ip}:${HOME}/.ssh/
    /usr/bin/ssh -i ${HOME}/.ssh/id_${ALGORITHM}_AGILE_DEPLOYMENT_BUILD_KEY_${BUILD_IDENTIFIER} ${OPTIONS} ${SERVER_USER}@${ip} "/bin/touch ${HOME}/.ssh/INFRASTRUCTUREREPOSITORYPROVIDER:${INFRASTRUCTURE_REPOSITORY_PROVIDER} ; /bin/touch ${HOME}/.ssh/INFRASTRUCTUREREPOSITORYUSERNAME:${INFRASTRUCTURE_REPOSITORY_USERNAME} ; /bin/touch ${HOME}/.ssh/INFRASTRUCTUREREPOSITORYPASSWORD:${INFRASTRUCTURE_REPOSITORY_PASSWORD} ; /bin/touch ${HOME}/.ssh/INFRASTRUCTUREREPOSITORYOWNER:${INFRASTRUCTURE_REPOSITORY_OWNER} ; /bin/touch ${HOME}/.ssh/APPLICATIONREPOSITORYTOKEN:${APPLICATION_REPOSITORY_TOKEN} ; /bin/touch ${HOME}/.ssh/APPLICATIONREPOSITORYPROVIDER:${APPLICATION_REPOSITORY_PROVIDER} ; /bin/touch ${HOME}/.ssh/APPLICATIONREPOSITORYUSERNAME:${APPLICATION_REPOSITORY_USERNAME} ; /bin/touch ${HOME}/.ssh/APPLICATIONREPOSITORYPASSWORD:${APPLICATION_REPOSITORY_PASSWORD} ; /bin/touch ${HOME}/.ssh/APPLICATIONREPOSITORYOWNER:${APPLICATION_REPOSITORY_OWNER}"
    /usr/bin/scp -i ${HOME}/.ssh/id_${ALGORITHM}_AGILE_DEPLOYMENT_BUILD_KEY_${BUILD_IDENTIFIER} ${OPTIONS} ${HOME}/.ssh/WEBSITEURL:* ${HOME}/.ssh/FROMADDRESS:* ${HOME}/.ssh/TOADDRESS:* ${HOME}/.ssh/EMAILUSERNAME:* ${HOME}/.ssh/EMAILPASSWORD:* ${HOME}/.ssh/EMAILPROVIDER:* ${HOME}/.ssh/APPLICATION:* ${HOME}/.ssh/SERVERUSER:* ${HOME}/.ssh/SERVERUSERPASSWORD:* ${HOME}/.ssh/DNSUSERNAME:* ${HOME}/.ssh/DNSEMAILADDRESS:* ${HOME}/.ssh/DNSSECURITYKEY:* ${HOME}/.ssh/DNSCHOICE:* ${HOME}/.ssh/WEBSITEURL:* ${HOME}/.ssh/DATABASEINSTALLATIONTYPE:* ${SERVER_USER}@${ip}:${HOME}/.ssh/

    MACHINETYPE="`/bin/ls ${HOME}/.ssh/MACHINETYPE:* | /usr/bin/awk -F':' '{print $NF}'`"
    /usr/bin/ssh -i ${HOME}/.ssh/id_${ALGORITHM}_AGILE_DEPLOYMENT_BUILD_KEY_${BUILD_IDENTIFIER} ${OPTIONS} ${SERVER_USER}@${ip} "${CUSTOM_USER_SUDO} /usr/bin/touch ${HOME}/${MACHINETYPE}"


    #Setup SSL Certificate
    /usr/bin/ssh -i ${HOME}/.ssh/id_${ALGORITHM}_AGILE_DEPLOYMENT_BUILD_KEY_${BUILD_IDENTIFIER} ${OPTIONS} ${SERVER_USER}@${ip} "${CUSTOM_USER_SUDO} /bin/mkdir -p ${HOME}/ssl//live/${WEBSITE_URL}"
    /usr/bin/scp -i ${HOME}/.ssh/id_${ALGORITHM}_AGILE_DEPLOYMENT_BUILD_KEY_${BUILD_IDENTIFIER} ${OPTIONS} ${HOME}/.ssh/fullchain.pem ${SERVER_USER}@${ip}:/home/${SERVER_USER}/.ssh/fullchain.pem
    /usr/bin/scp -i ${HOME}/.ssh/id_${ALGORITHM}_AGILE_DEPLOYMENT_BUILD_KEY_${BUILD_IDENTIFIER} ${OPTIONS} ${HOME}/.ssh/privkey.pem ${SERVER_USER}@${ip}:/home/${SERVER_USER}/.ssh/privkey.pem
    /usr/bin/scp -i ${HOME}/.ssh/id_${ALGORITHM}_AGILE_DEPLOYMENT_BUILD_KEY_${BUILD_IDENTIFIER} ${OPTIONS} ${HOME}/.ssh/${WEBSITE_URL}.json ${SERVER_USER}@${ip}:/home/${SERVER_USER}/.ssh/${WEBSITE_URL}.json
    /usr/bin/ssh -i ${HOME}/.ssh/id_${ALGORITHM}_AGILE_DEPLOYMENT_BUILD_KEY_${BUILD_IDENTIFIER} ${OPTIONS} ${SERVER_USER}@${ip} "${CUSTOM_USER_SUDO} /bin/cp /home/${SERVER_USER}/.ssh/fullchain.pem ${HOME}/ssl/live/${WEBSITE_URL}/fullchain.pem"
    /usr/bin/ssh -i ${HOME}/.ssh/id_${ALGORITHM}_AGILE_DEPLOYMENT_BUILD_KEY_${BUILD_IDENTIFIER} ${OPTIONS} ${SERVER_USER}@${ip} "${CUSTOM_USER_SUDO} /bin/cp /home/${SERVER_USER}/.ssh/privkey.pem ${HOME}/ssl/live/${WEBSITE_URL}/privkey.pem"
    /usr/bin/ssh -i ${HOME}/.ssh/id_${ALGORITHM}_AGILE_DEPLOYMENT_BUILD_KEY_${BUILD_IDENTIFIER} ${OPTIONS} ${SERVER_USER}@${ip} "${CUSTOM_USER_SUDO} /bin/cp /home/${SERVER_USER}/.ssh/${WEBSITE_URL}.json ${HOME}/ssl/live/${WEBSITE_URL}/${WEBSITE_URL}.json"
    /usr/bin/ssh -i ${HOME}/.ssh/id_${ALGORITHM}_AGILE_DEPLOYMENT_BUILD_KEY_${BUILD_IDENTIFIER} ${OPTIONS} ${SERVER_USER}@${ip} "${CUSTOM_USER_SUDO} /bin/chown root.root ${HOME}/ssl/live/${WEBSITE_URL}/fullchain.pem"
    /usr/bin/ssh -i ${HOME}/.ssh/id_${ALGORITHM}_AGILE_DEPLOYMENT_BUILD_KEY_${BUILD_IDENTIFIER} ${OPTIONS} ${SERVER_USER}@${ip} "${CUSTOM_USER_SUDO} /bin/chmod 400  ${HOME}/ssl/live/${WEBSITE_URL}/fullchain.pem"
    /usr/bin/ssh -i ${HOME}/.ssh/id_${ALGORITHM}_AGILE_DEPLOYMENT_BUILD_KEY_${BUILD_IDENTIFIER} ${OPTIONS} ${SERVER_USER}@${ip} "${CUSTOM_USER_SUDO} /bin/chown root.root ${HOME}/ssl/live/${WEBSITE_URL}/privkey.pem"
    /usr/bin/ssh -i ${HOME}/.ssh/id_${ALGORITHM}_AGILE_DEPLOYMENT_BUILD_KEY_${BUILD_IDENTIFIER} ${OPTIONS} ${SERVER_USER}@${ip} "${CUSTOM_USER_SUDO} /bin/chmod 400  ${HOME}/ssl/live/${WEBSITE_URL}/privkey.pem"
    /usr/bin/ssh -i ${HOME}/.ssh/id_${ALGORITHM}_AGILE_DEPLOYMENT_BUILD_KEY_${BUILD_IDENTIFIER} ${OPTIONS} ${SERVER_USER}@${ip} "${CUSTOM_USER_SUDO} /bin/chown root.root ${HOME}/ssl/live/${WEBSITE_URL}/${WEBSITE_URL}.json"
    /usr/bin/ssh -i ${HOME}/.ssh/id_${ALGORITHM}_AGILE_DEPLOYMENT_BUILD_KEY_${BUILD_IDENTIFIER} ${OPTIONS} ${SERVER_USER}@${ip} "${CUSTOM_USER_SUDO} /bin/chmod 400  ${HOME}/ssl/live/${WEBSITE_URL}/${WEBSITE_URL}.json"
